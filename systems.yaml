---
  - name : Base config for all linux host
    hosts: all
    become: True
    tasks:
      - name : Create admin user with uid 5001
        user :
          name : admin
          state : present
          uid : 5001
      - name : Remove user dojo
        user:
          name : dojo
          state : absent
      - name : Install Tree
        yum :
          name : tree
          state : present
      - name : Install ntp
        yum :
          name : ntp
          state : present
      - name : start ntp service
        service : name=ntpd state=started enabled=yes 



import boto3
import datetime

cloudwatch = boto3.client('cloudwatch')

end_time = datetime.datetime.utcnow()
start_time = end_time - datetime.timedelta(days=1)

fsx_id = "fs-aaa"

response = cloudwatch.get_metric_data(
    MetricDataQueries=[
        {
            'Id': 'fsx_utilization',
            'MetricStat': {
                'Metric': {
                    'Namespace': 'AWS/FSx',
                    'MetricName': 'StorageCapacityUtilization',
                    'Dimensions': [{'Name': 'FileSystemId', 'Value': fsx_id}]
                },
                'Period': 3600,
                'Stat': 'Average'
            },
            'ReturnData': True
        }
    ],
    StartTime=start_time,
    EndTime=end_time
)

# Print results
for result in response['MetricDataResults']:
    print(f"Metric: {result['Id']}")
    for timestamp, value in zip(result['Timestamps'], result['Values']):
        print(f"Timestamp: {timestamp}, Value: {value}%")

    
    
            